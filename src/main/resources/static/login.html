<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登陆</title>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="plugins/element-ui/index.css">
</head>
<!-- 引入组件库 -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="js/vue.js"></script>
<script src="js/axios-0.18.0.js"></script>
<script src="plugins/element-ui/index.js"></script>
<style>

    html {
        height: 100%;
    }

    body {
        height: 100%;
    }

    .login-container {
        margin-left: auto;
        margin-right: auto;
        margin-top: 10%;
        width: 15%;
    }

    .el-form el-form-item el-input {
        background: #B3C0D1;
        border: 0px;
        border-radius: 8px;
    }
</style>
<body style="background-image: url('./img/login.jfif')">
<div id="app">
    <div class="login-container">
        <el-form :model="userInfo" class="demo-ruleForm">
            <el-form-item label="手机号:" prop="tel">
                <el-input type="text" placeholder="请输入手机号" v-model="userInfo.tel"
                          autocomplete="off"></el-input>
            </el-form-item>
            <el-form-item label="密码:" prop="password">
                <el-input type="password" placeholder="请输入密码" v-model="userInfo.password"
                          autocomplete="off"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button type="info" @click="onSubmit()">提交</el-button>
                <el-button @click="resetForm()">重置</el-button>
            </el-form-item>
        </el-form>
    </div>
</div>
</body>
<script>
    new Vue({
        el: '#app',
        data: {
            userInfo: {
                tel: '',
                password: ''
            }
        },
        methods: {
            onSubmit() {
                axios.post('/user-info/login', this.userInfo).then((res) => {
                    if (res.data.isSuccess) {
                        window.location.href = "./index.html?id=" + res.data.data.id + "&&username=" + res.data.data.username;
                    } else {
                        this.$message.error(res.data.message);
                    }
                })
            },
            resetForm() {
                this.$nextTick(() => {
                    this.userInfo = {};
                })

            }
        }
    })
</script>

</html>